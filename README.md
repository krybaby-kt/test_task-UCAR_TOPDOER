# Test Task UCAR TOPDOER

API-—Å–µ—Ä–≤–∏—Å –¥–ª—è —É—á—ë—Ç–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤. –ü—Ä–æ–µ–∫—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –∏ —Å–∏—Å—Ç–µ–º–∞–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö (—Å–∞–º–æ–∫–∞—Ç –Ω–µ –≤ —Å–µ—Ç–∏, —Ç–æ—á–∫–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç, –æ—Ç—á—ë—Ç –Ω–µ –≤—ã–≥—Ä—É–∑–∏–ª—Å—è), —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ —Ç–µ—Ä—è–ª–∏—Å—å –≤ —á–∞—Ç–∞—Ö.

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π RESTful API —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é:
- –°–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤
- –ü–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∏–Ω—Ü–∏–¥–µ–Ω—Ç–µ –ø–æ ID
- –ü–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ —Å—Ç–∞—Ç—É—Å—É, –∏—Å—Ç–æ—á–Ω–∏–∫—É –∏ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞ –∏ –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Python 3.11+**
- **FastAPI** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π, –±—ã—Å—Ç—Ä—ã–π –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è API
- **SQLAlchemy 2.0** - ORM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
- **PostgreSQL** - —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Alembic** - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **Pydantic** - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **Uvicorn** - ASGI —Å–µ—Ä–≤–µ—Ä

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.11 –∏–ª–∏ –≤—ã—à–µ
- PostgreSQL 12 –∏–ª–∏ –≤—ã—à–µ

### –®–∞–≥–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd test_task-UCAR_TOPDOER
```

2. **–°–æ–∑–¥–∞–π—Ç–µ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
```bash
python -m venv venv
# Windows
venv\Scripts\activate
# Linux/Mac
source venv/bin/activate
```

3. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```env
BACKEND_HOST=localhost
BACKEND_PORT=8000

DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=postgres
DATABASE_PASSWORD=admin
DATABASE_NAME=test_task_ucar_topdoer
```

5. **–°–æ–∑–¥–∞–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:**
```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ PostgreSQL –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
CREATE DATABASE test_task_ucar_topdoer;
```

6. **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:**
```bash
alembic upgrade head
```

7. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
python main.py
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å–∞–º:
- **Swagger UI:** http://localhost:8000/api/docs
- **ReDoc:** http://localhost:8000/api/redoc

## üìö API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ë–∞–∑–æ–≤—ã–π URL: `/api/v1/incidents`

### 1. –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç

**POST** `/api/v1/incidents/create`

–°–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç –≤ —Å–∏—Å—Ç–µ–º–µ.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "status": "new",
  "source": "operator",
  "description": "–°–∞–º–æ–∫–∞—Ç –Ω–µ –≤ —Å–µ—Ç–∏ –≤ —Ç–æ—á–∫–µ –ê"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (201 Created):**
```json
{
  "id": 1,
  "status": "new",
  "source": "operator",
  "description": "–°–∞–º–æ–∫–∞—Ç –Ω–µ –≤ —Å–µ—Ç–∏ –≤ —Ç–æ—á–∫–µ –ê",
  "creating_date": "2025-11-10T08:30:00"
}
```

### 2. –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç –ø–æ ID

**GET** `/api/v1/incidents/get/{incident_id}`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–Ω—Ü–∏–¥–µ–Ω—Ç–µ –ø–æ –µ–≥–æ ID.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```bash
curl -X GET "http://localhost:8000/api/v1/incidents/get/1"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (200 OK):**
```json
{
  "id": 1,
  "status": "new",
  "source": "operator",
  "description": "–°–∞–º–æ–∫–∞—Ç –Ω–µ –≤ —Å–µ—Ç–∏ –≤ —Ç–æ—á–∫–µ –ê",
  "creating_date": "2025-11-10T08:30:00"
}
```

**–û—à–∏–±–∫–∏:**
- `404 Not Found` - –∏–Ω—Ü–∏–¥–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

### 3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤

**GET** `/api/v1/incidents/get`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
- `page` (int, default: 1) - –Ω–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `page_size` (int, default: 10, max: 100) - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- `incident_status` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
- `incident_source` (string, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É
- `creating_date_from` (datetime, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–æ—Ç)
- `creating_date_to` (datetime, optional) - —Ñ–∏–ª—å—Ç—Ä –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è (–¥–æ)

**–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:**

–í—Å–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã (–ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞):
```bash
curl -X GET "http://localhost:8000/api/v1/incidents/get?page=1&page_size=10"
```

–§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É:
```bash
curl -X GET "http://localhost:8000/api/v1/incidents/get?incident_status=new"
```

–§–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É –∏ –¥–∞—Ç–µ:
```bash
curl -X GET "http://localhost:8000/api/v1/incidents/get?incident_source=operator&creating_date_from=2025-11-01T00:00:00"
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (200 OK):**
```json
{
  "incidents": [
    {
      "id": 1,
      "status": "new",
      "source": "operator",
      "description": "–°–∞–º–æ–∫–∞—Ç –Ω–µ –≤ —Å–µ—Ç–∏ –≤ —Ç–æ—á–∫–µ –ê",
      "creating_date": "2025-11-10T08:30:00"
    },
    {
      "id": 2,
      "status": "in_progress",
      "source": "monitoring",
      "description": "–¢–æ—á–∫–∞ –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç",
      "creating_date": "2025-11-10T09:15:00"
    }
  ]
}
```

### 4. –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç

**PUT** `/api/v1/incidents/update/{incident_id}`

–û–±–Ω–æ–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ –ø–æ –µ–≥–æ ID.

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
```json
{
  "status": "resolved",
  "source": "operator",
  "description": "–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞, —Å–∞–º–æ–∫–∞—Ç —Å–Ω–æ–≤–∞ –≤ —Å–µ—Ç–∏"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞ (200 OK):**
```json
{
  "id": 1,
  "status": "resolved",
  "source": "operator",
  "description": "–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞, —Å–∞–º–æ–∫–∞—Ç —Å–Ω–æ–≤–∞ –≤ —Å–µ—Ç–∏",
  "creating_date": "2025-11-10T08:30:00"
}
```

**–û—à–∏–±–∫–∏:**
- `404 Not Found` - –∏–Ω—Ü–∏–¥–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω
- `500 Internal Server Error` - –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏

## üìä –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### –ò–Ω—Ü–∏–¥–µ–Ω—Ç

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | Integer | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä (–∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç) |
| `status` | Enum | –°—Ç–∞—Ç—É—Å –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ |
| `source` | Enum | –ò—Å—Ç–æ—á–Ω–∏–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ |
| `description` | String | –û–ø–∏—Å–∞–Ω–∏–µ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ (–¥–æ 255 —Å–∏–º–≤–æ–ª–æ–≤) |
| `creating_date` | DateTime | –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è |

### –°—Ç–∞—Ç—É—Å—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞

- `new` - –Ω–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç
- `in_progress` - –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ
- `resolved` - —Ä–µ—à–µ–Ω
- `closed` - –∑–∞–∫—Ä—ã—Ç
- `canceled` - –æ—Ç–º–µ–Ω–µ–Ω

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞

- `operator` - –æ–ø–µ—Ä–∞—Ç–æ—Ä
- `monitoring` - —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `partner` - –ø–∞—Ä—Ç–Ω–µ—Ä
- `system` - —Å–∏—Å—Ç–µ–º–∞
- `user` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `api` - API
- `web` - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- `mobile` - –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `other` - –¥—Ä—É–≥–æ–µ

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
test_task-UCAR_TOPDOER/
‚îú‚îÄ‚îÄ configuration/          # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ base.py            # –ë–∞–∑–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è event loop
‚îÇ   ‚îú‚îÄ‚îÄ paths.py           # –ü—É—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ settings.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ .env
‚îú‚îÄ‚îÄ database/              # –°–ª–æ–π —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ base.py            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ base_model.py      # –ë–∞–∑–æ–≤–∞—è –º–æ–¥–µ–ª—å SQLAlchemy
‚îÇ   ‚îú‚îÄ‚îÄ base_repository.py # –ë–∞–∑–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ enums/             # –ü–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏—è –¥–ª—è –º–æ–¥–µ–ª–µ–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ models/            # –ú–æ–¥–µ–ª–∏ SQLAlchemy
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ incidents.py
‚îÇ   ‚îú‚îÄ‚îÄ repositories/      # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ incidents.py
‚îÇ   ‚îî‚îÄ‚îÄ migrations/        # –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
‚îÇ       ‚îî‚îÄ‚îÄ versions/
‚îú‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ exception_handler/ # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ decorator.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handler.py
‚îÇ   ‚îî‚îÄ‚îÄ loggers/           # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ       ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ web_api/               # API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py        # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ endpoints/
‚îÇ       ‚îî‚îÄ‚îÄ v1/
‚îÇ           ‚îî‚îÄ‚îÄ incidents/ # –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤
‚îÇ               ‚îú‚îÄ‚îÄ __init__.py
‚îÇ               ‚îî‚îÄ‚îÄ schematics.py
‚îú‚îÄ‚îÄ assets/                # –†–µ—Å—É—Ä—Å—ã –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ requirements.txt       # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ alembic.ini           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Alembic
‚îî‚îÄ‚îÄ .env                  # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
```

## üóÑ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç PostgreSQL —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º –¥—Ä–∞–π–≤–µ—Ä–æ–º `asyncpg`. 

### –ú–∏–≥—Ä–∞—Ü–∏–∏

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Alembic:

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic revision --autogenerate -m "description"

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
alembic downgrade -1

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π
alembic history
```

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Black** –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞:

```bash
# –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç
black .

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π
black --check .
```

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–π –≤ JSON —Ñ–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ `assets/exceptions/`.

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ–±–µ—Ä–Ω—É—Ç—ã –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ:
- –õ–æ–≥–∏—Ä—É—é—Ç –æ—à–∏–±–∫–∏ —Å –ø–æ–ª–Ω—ã–º —Ç—Ä–µ–π—Å–±—ç–∫–æ–º
- –í–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ HTTP —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ã
- –°–æ—Ö—Ä–∞–Ω—è—é—Ç –¥–µ—Ç–∞–ª–∏ –æ—à–∏–±–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### Python (requests)

```python
import requests

BASE_URL = "http://localhost:8000/api/v1/incidents"

# –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç
response = requests.post(f"{BASE_URL}/create", json={
    "status": "new",
    "source": "operator",
    "description": "–°–∞–º–æ–∫–∞—Ç –Ω–µ –≤ —Å–µ—Ç–∏"
})
incident = response.json()
print(f"–°–æ–∑–¥–∞–Ω –∏–Ω—Ü–∏–¥–µ–Ω—Ç ID: {incident['id']}")

# –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç
response = requests.get(f"{BASE_URL}/get/{incident['id']}")
print(response.json())

# –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
response = requests.put(f"{BASE_URL}/update/{incident['id']}", json={
    "status": "resolved"
})
print(response.json())

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º
response = requests.get(f"{BASE_URL}/get", params={
    "incident_status": "new",
    "page": 1,
    "page_size": 10
})
print(response.json())
```

### cURL

```bash
# –°–æ–∑–¥–∞—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç
curl -X POST "http://localhost:8000/api/v1/incidents/create" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "new",
    "source": "monitoring",
    "description": "–û—Ç—á–µ—Ç –Ω–µ –≤—ã–≥—Ä—É–∑–∏–ª—Å—è"
  }'

# –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º "new"
curl -X GET "http://localhost:8000/api/v1/incidents/get?incident_status=new"

# –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ü–∏–¥–µ–Ω—Ç
curl -X PUT "http://localhost:8000/api/v1/incidents/update/1" \
  -H "Content-Type: application/json" \
  -d '{
    "status": "in_progress"
  }'
```

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å 4 –≤–æ—Ä–∫–µ—Ä–∞–º–∏ Uvicorn
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏—é –¥–ª—è –±–æ–ª—å—à–∏—Ö –≤—ã–±–æ—Ä–æ–∫ –¥–∞–Ω–Ω—ã—Ö

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ UCAR TOPDOER.

## üë§ –ê–≤—Ç–æ—Ä

–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ UCAR TOPDOER.

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** –ù–æ—è–±—Ä—å 2025

